# 小红书截图工具

一个用于自动化截取小红书笔记的工具，支持命令行和 Web 界面操作。批量导入 URL 解析，输出笔记 iPhone 形式截图。

## 项目简介

### 主要功能
- 自动截取小红书笔记页面
- 自动处理多页笔记
- 自动添加统一的顶部和底部样式
- 支持保存和复用登录状态
- 提供命令行和 Web 界面两种操作方式
- 支持批量处理多个链接

### 工作原理
1. 使用 Selenium 模拟移动设备访问小红书
2. 自动处理登录状态（支持保存和复用）
3. 自动处理页面弹窗和提示
4. 使用 PIL 处理图片拼接和样式统一
5. 支持自动检测和下载所需资源

### 图片规格
- 整体尺寸：1179 × 2556
- 中间部分（含页眉）：1179 × 2490
- 中间部分（不含页眉）：1179 × 2310
- 顶部区域：1179 × 150
- 底部区域：1179 × 96

## 环境准备

### 必需组件
1. Python 3.12（非必要，建议3.7+）
2. Chrome 浏览器
3. ChromeDriver

### 依赖安装

```bash
pip install -r requirements.txt
```

## 运行方法

### Python 环境运行

#### 命令行模式
1. 准备 url.txt 文件，每行一个小红书链接
2. 运行命令：
```bash
python main.py
```


#### Web 界面模式

1. 运行命令：
```bash
python web.py
```

2. 浏览器会自动打开 Web 界面
3. 在文本框中输入链接（每行一个）
4. 点击"开始处理"

### 打包版本运行

#### Windows
1. 双击运行 `dist/启动程序.bat`
2. 等待浏览器自动打开
3. 在 Web 界面操作

#### macOS/Linux
1. 运行 `dist/XHS_Screenshot`
2. 等待浏览器自动打开
3. 在 Web 界面操作

## 功能说明

### 登录状态管理
- 首次使用需要手动登录
- 登录后可以保存状态供下次使用
- 可以选择是否使用已保存的登录状态

### 资源管理
- 首次运行会自动下载所需资源
- 可以通过"准备资源"按钮手动更新资源

### 批量处理
- 支持同时处理多个链接
- 自动处理多页笔记
- 自动命名和保存截图

## Q&A

### 常见问题

1. **无法启动程序**
   - 检查 Chrome 浏览器是否安装
   - 检查是否有管理员权限
   - 检查防火墙设置

2. **登录状态失效**
   - 清除保存的配置后重新登录
   - 检查网络连接
   - 确认账号状态正常

3. **截图不完整**
   - 检查网络连接
   - 增加页面加载等待时间
   - 确认页面是否正常加载

4. **资源下载失败**
   - 检查网络连接
   - 手动下载资源文件放入 src 目录
   - 使用"准备资源"功能重试

5. **端口被占用**
   - 程序会自动寻找可用端口
   - 检查并关闭占用端口的程序
   - 重启电脑后重试

### 技术支持
如遇问题，请提供以下信息：
1. 运行环境（操作系统、Python 版本）
2. 错误信息截图
3. 控制台输出内容
4. 复现步骤

## 开发说明

### 项目结构

```
project/
├── main.py # 命令行版本主程序
├── web.py # Web 版本主程序
├── requirements.txt # 依赖列表
├── templates/ # Web 界面模板
├── src/ # 资源文件目录
└── screenshot/ # 输出目录
```


### 打包说明
1. 安装依赖：`pip install -r requirements.txt`
2. Windows：运行 `build.bat`
3. macOS/Linux：运行 `build.sh`
4. 打包文件在 `dist` 目录中

## 注意事项
1. 确保网络连接稳定
2. 首次运行需要登录
3. 注意遵守小红书使用规范
4. 定期更新程序获取新功能